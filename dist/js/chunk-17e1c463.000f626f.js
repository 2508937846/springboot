(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17e1c463"],{4886:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),o={style:{padding:"10px"}},c=Object(a["p"])("编辑"),l=Object(a["p"])("删除"),i={class:"custom-tree-container"},r={class:"custom-tree-node"},s=["onClick"],d={style:{margin:"10px 0"}},u={class:"dialog-footer"},b=Object(a["p"])("取 消"),g=Object(a["p"])("确 定");function f(e,t,n,f,h,O){var j=Object(a["R"])("el-table-column"),m=Object(a["R"])("el-button"),p=Object(a["R"])("el-popconfirm"),k=Object(a["R"])("el-table"),y=Object(a["R"])("el-tree"),C=Object(a["R"])("el-card"),V=Object(a["R"])("el-cascader"),v=Object(a["R"])("el-input"),w=Object(a["R"])("el-form-item"),q=Object(a["R"])("el-form"),_=Object(a["R"])("el-dialog"),R=Object(a["S"])("loading");return Object(a["I"])(),Object(a["m"])("div",o,[Object(a["hb"])(Object(a["q"])(k,{data:h.tableData,border:"",stripe:"",style:{width:"100%"},"row-key":"id","default-expand-all":""},{default:Object(a["gb"])((function(){return[Object(a["q"])(j,{prop:"name",label:"名称"}),Object(a["q"])(j,{label:"操作"},{default:Object(a["gb"])((function(e){return[1===h.user.role?(Object(a["I"])(),Object(a["k"])(m,{key:0,size:"mini",onClick:function(t){return O.handleEdit(e.row)}},{default:Object(a["gb"])((function(){return[c]})),_:2},1032,["onClick"])):Object(a["l"])("",!0),1===h.user.role?(Object(a["I"])(),Object(a["k"])(p,{key:1,title:"确定删除吗？",onConfirm:function(t){return O.handleDelete(e.row.id)}},{reference:Object(a["gb"])((function(){return[Object(a["q"])(m,{size:"mini",type:"danger"},{default:Object(a["gb"])((function(){return[l]})),_:1})]})),_:2},1032,["onConfirm"])):Object(a["l"])("",!0)]})),_:1})]})),_:1},8,["data"]),[[R,h.loading]]),Object(a["q"])(C,{style:{margin:"10px 0",width:"50%"}},{default:Object(a["gb"])((function(){return[Object(a["n"])("div",i,[Object(a["q"])(y,{data:h.tableData,props:h.defaultProps,"show-checkbox":"",onCheckChange:O.handleCheckChange,"node-key":"id","default-expanded-keys":[1,2],"default-checked-keys":h.checkedList},{default:Object(a["gb"])((function(e){var t=e.node,n=e.data;return[Object(a["n"])("span",r,[Object(a["n"])("span",null,Object(a["V"])(t.label),1),Object(a["n"])("span",null,[Object(a["n"])("a",{onClick:function(e){return O.remove(t,n)}}," Delete ",8,s)])])]})),_:1},8,["data","props","onCheckChange","default-checked-keys"])])]})),_:1}),Object(a["q"])(C,{style:{width:"50%"}},{default:Object(a["gb"])((function(){return[Object(a["q"])(V,{options:h.options,clearable:"",onChange:O.changeCas,modelValue:h.casdata,"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.casdata=e})},null,8,["options","onChange","modelValue"])]})),_:1}),Object(a["n"])("div",d,[Object(a["q"])(_,{title:"提示",modelValue:h.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return h.dialogVisible=e}),width:"30%"},{footer:Object(a["gb"])((function(){return[Object(a["n"])("span",u,[Object(a["q"])(m,{onClick:t[2]||(t[2]=function(e){return h.dialogVisible=!1})},{default:Object(a["gb"])((function(){return[b]})),_:1}),Object(a["q"])(m,{type:"primary",onClick:O.save},{default:Object(a["gb"])((function(){return[g]})),_:1},8,["onClick"])])]})),default:Object(a["gb"])((function(){return[Object(a["q"])(q,{model:h.form,"label-width":"120px"},{default:Object(a["gb"])((function(){return[Object(a["q"])(w,{label:"名称"},{default:Object(a["gb"])((function(){return[Object(a["q"])(v,{modelValue:h.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return h.form.name=e}),style:{width:"80%"}},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"])])])}var h=n("b775"),O={name:"Category",components:{},data:function(){return{user:{},loading:!0,form:{},dialogVisible:!1,search:"",currentPage:1,pageSize:10,total:0,tableData:[],casdata:["Anhui","Hefei","Zhengwu"],defaultProps:{children:"children",label:"name"},checkedList:[],options:[]}},created:function(){var e=this,t=sessionStorage.getItem("user")||"{}";this.user=JSON.parse(t),h["a"].get("/user/"+this.user.id).then((function(t){"0"===t.code&&(e.user=t.data)})),h["a"].get("/area/tree").then((function(t){console.log(t.data),e.options=t.data})),this.load()},methods:{changeCas:function(e){console.log(e),console.log(this.casdata)},remove:function(e,t){var n=this;h["a"].delete("/category/"+t.id).then((function(e){n.load()}))},handleCheckChange:function(e,t,n){console.log(e.id),console.log(e.name)},load:function(){var e=this;this.loading=!0,h["a"].get("/category").then((function(t){e.loading=!1,e.tableData=t.data;var n=[4];e.checkedList=n}))},add:function(){this.dialogVisible=!0,this.form={}},save:function(){var e=this;this.form.id?h["a"].put("/category",this.form).then((function(t){console.log(t),"0"===t.code?e.$message({type:"success",message:"更新成功"}):e.$message({type:"error",message:t.msg}),e.load(),e.dialogVisible=!1})):h["a"].post("/category",this.form).then((function(t){console.log(t),"0"===t.code?e.$message({type:"success",message:"新增成功"}):e.$message({type:"error",message:t.msg}),e.load(),e.dialogVisible=!1}))},handleEdit:function(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleDelete:function(e){var t=this;console.log(e),h["a"].delete("/category/"+e).then((function(e){"0"===e.code?t.$message({type:"success",message:"删除成功"}):t.$message({type:"error",message:e.msg}),t.load()}))},handleSizeChange:function(e){this.pageSize=e,this.load()},handleCurrentChange:function(e){this.currentPage=e,this.load()}}};n("ce53");O.render=f;t["default"]=O},ce53:function(e,t,n){"use strict";n("db31")},db31:function(e,t,n){}}]);
//# sourceMappingURL=chunk-17e1c463.000f626f.js.map